option_settings:
  aws:elasticbeanstalk:container:tomcat:jvmoptions:
    Xms: 512m
    Xmx: 1024m
  aws:elasticbeanstalk:application:environment:
    SPRING_PROFILES_ACTIVE: prod
    JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: static
  aws:elasticbeanstalk:environment:
    LoadBalancerType: application
  aws:elbv2:listener:default:
    ListenerEnabled: true

packages:
  yum:
    java-21-amazon-corretto: []
    curl: []
    docker: []

commands:
  01_install_docker:
    command: |
      amazon-linux-extras install docker -y
      service docker start
      usermod -a -G docker ec2-user
      systemctl enable docker.service
      systemctl start docker.service 